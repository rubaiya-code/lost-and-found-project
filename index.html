<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOST & FOUND - Campus Lost & Found</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #fef9f4;
        }
        .title-font {
            font-family: 'Fredoka One', cursive;
        }
        .card {
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .item-tag {
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 12px;
        }
        .lost {
            background-color: #ffedd5;
            color: #9a3412;
        }
        .found {
            background-color: #dcfce7;
            color: #166534;
        }
        .comment-item {
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .file-upload-btn:hover {
            background-color: #f9fafb;
        }
        .file-upload-input {
            width: 0.1px;
            height: 0.1px;
            opacity: 0;
            overflow: hidden;
            position: absolute;
            z-index: -1;
        }
        .image-preview {
            max-height: 200px;
            width: auto;
            display: none;
            margin-top: 10px;
        }
    </style>
</head>
<body class="min-h-screen">
    <header class="bg-gradient-to-r from-orange-400 to-pink-400 py-8 shadow-lg">
        <div class="container mx-auto px-4">
            <h1 class="title-font text-4xl md:text-6xl text-white text-center drop-shadow-md">
                LOST & FOUND
            </h1>
            <p class="text-center text-white/90 text-lg mt-2">
                Where lost campus treasures find their way home
            </p>
        </div>
    </header>

    <main class="container mx-auto px-4 py-12">
        <div class="max-w-5xl mx-auto">
            <!-- Search and Filter Section -->
            <div class="bg-white rounded-xl shadow-md p-6 mb-8">
                <h2 class="text-2xl font-bold mb-4 text-orange-500">Search Lost Items</h2>
                <div class="flex flex-col md:flex-row gap-4">
                    <input type="text" placeholder="Type what you lost..." class="flex-grow px-4 py-2 border border-orange-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-300">
                    <select class="px-4 py-2 border border-orange-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-300">
                        <option>All Items</option>
                        <option>Today</option>
                        <option>This Week</option>
                        <option>Electronics</option>
                        <option>Books</option>
                        <option>Accessories</option>
                        <option>Others</option>
                    </select>
                    <button class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg transition shadow-md">Search</button>
                </div>
            </div>

            <!-- Post New Item Button -->
            <button id="newPostBtn" class="fixed bottom-8 right-8 bg-pink-500 hover:bg-pink-600 text-white text-lg font-semibold px-6 py-3 rounded-full shadow-xl flex items-center gap-2 transition z-10">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                </svg>
                Post Lost Item
            </button>

            <!-- Items Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="itemsGrid">
                <!-- Items will be loaded here dynamically -->
            </div>
        </div>
    </main>

    <!-- New Post Modal -->
    <div id="newPostModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-20 hidden">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-orange-500">Post Lost Item</h2>
                <button id="closeModalBtn" class="text-gray-500 hover:text-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Item Name *</label>
                    <input type="text" id="itemName" class="w-full px-4 py-2 border border-orange-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-300" required>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Description *</label>
                    <textarea id="itemDescription" rows="3" class="w-full px-4 py-2 border border-orange-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-300" required></textarea>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Category *</label>
                    <select id="itemCategory" class="w-full px-4 py-2 border border-orange-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-300">
                        <option>Electronics</option>
                        <option>Books</option>
                        <option>Accessories</option>
                        <option>Clothing</option>
                        <option>Others</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Lost Location *</label>
                    <input type="text" id="itemLocation" class="w-full px-4 py-2 border border-orange-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-300" required>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Upload Photo *</label>
                    <div class="mt-2">
                        <input type="file" id="itemPhoto" accept="image/*" class="file-upload-input">
                        <label for="itemPhoto" class="file-upload-btn flex flex-col items-center px-6 py-10 bg-white border-2 border-dashed border-orange-200 rounded-lg cursor-pointer hover:bg-orange-50 transition">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-orange-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                            </svg>
                            <span class="mt-2 text-sm font-medium text-orange-500">Click to upload</span>
                            <span class="text-xs text-gray-500 mt-1">PNG, JPG up to 5MB</span>
                        </label>
                        <img id="imagePreview" class="image-preview rounded-lg border border-orange-200" alt="Preview of uploaded image">
                    </div>
                </div>

                <div class="flex justify-end gap-3 pt-4">
                    <button id="cancelPostBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition">Cancel</button>
                    <button id="submitPostBtn" class="px-6 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition shadow-md">Post Item</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Item Details Modal -->
    <div id="itemModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-20 hidden">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md p-6">
            <div class="flex justify-between items-start mb-4">
                <div>
                    <span class="item-tag lost inline-block mb-2">LOST</span>
                    <h2 id="modalItemName" class="text-xl font-bold text-gray-800"></h2>
                </div>
                <button id="closeItemModalBtn" class="text-gray-500 hover:text-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <div class="mb-6">
                <img id="modalItemImage" src="" alt="" class="w-full h-48 object-cover rounded-lg mb-3">
                <p id="modalItemDescription" class="text-gray-600"></p>
                <div class="mt-3 flex items-center gap-2 text-sm text-gray-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    <span id="modalItemLocation"></span>
                </div>
                <div class="mt-3 flex items-center gap-2 text-sm text-gray-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    <span id="modalItemDate"></span>
                </div>
            </div>

            <div class="border-t border-gray-200 pt-4">
                <h3 class="font-medium mb-3">Comments</h3>
                <div id="commentsContainer" class="space-y-3 mb-4 max-h-40 overflow-y-auto"></div>

                <div class="flex gap-2 mt-4">
                    <input type="text" id="newCommentInput" placeholder="Add a comment..." class="flex-grow px-4 py-2 border border-orange-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-300">
                    <button id="postCommentBtn" class="px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition">Post</button>
                </div>

                <button id="markFoundBtn" class="mt-6 w-full px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-medium rounded-lg transition shadow-md flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                    I Found Owner!
                </button>
            </div>
        </div>
    </div>

    <!-- Owner Found Confirmation Modal -->
    <div id="foundModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-20 hidden">
        <div class="bg-white rounded-xl shadow-2xl p-6 text-center max-w-sm">
            <div class="w-16 h-16 flex items-center justify-center bg-emerald-100 rounded-full mx-auto mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
            </div>
            <h3 class="text-xl font-bold text-gray-800 mb-2">Owner Found!</h3>
            <p class="text-gray-600 mb-6">This item will be marked as found and moved to the found item archive.</p>
            <div class="flex justify-center gap-3">
                <button id="cancelFoundBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition">Cancel</button>
                <button id="confirmFoundBtn" class="px-6 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg transition shadow-md">Confirm</button>
            </div>
        </div>
    </div>

    <footer class="bg-gray-100 py-8 mt-12">
        <div class="container mx-auto px-4 text-center text-gray-500 text-sm">
            <p>Paws & Find - Helping lost items find their way home since 2023</p>
            <p class="mt-2">Made with ❤️ for campus community</p>
        </div>
    </footer>

    <script>
        // Sample data for lost items
        const sampleItems = [
            {
                id: 1,
                name: "Black Wireless Headphones",
                description: "Lost my Sony WH-1000XM4 headphones near the library cafe. It has a small scratch on the left earcup.",
                category: "Electronics",
                location: "Library Cafe",
                date: "2 hours ago",
                image: "https://placehold.co/600x400/ffedd5/f97316?text=Sony+Headphones",
                status: "lost",
                comments: [
                    { user: "Rahim", text: "I think I saw someone using similar headphones in the CS department" },
                    { user: "Fatima", text: "Did you check with the library lost & found?" }
                ]
            },
            {
                id: 2,
                name: "Blue Water Bottle",
                description: "Left my Hydro Flask blue water bottle in Room 203 of Science Building. It has a space-themed sticker on it.",
                category: "Accessories",
                location: "Science Building Room 203",
                date: "Yesterday",
                image: "https://placehold.co/600x400/dbeafe/1d4ed8?text=Hydro+Flask",
                status: "lost",
                comments: []
            },
            {
                id: 3,
                name: "Calculus Textbook",
                description: "Lost my Calculus textbook with notes in margins. James Stewart 9th Edition. Name written inside cover.",
                category: "Books",
                location: "Math Department",
                date: "Yesterday",
                image: "https://placehold.co/600x400/fef2e0/e67e22?text=Calculus+Book",
                status: "lost",
                comments: [
                    { user: "Ali", text: "I think I've seen this book in the lost & found at admin building" }
                ]
            },
            {
                id: 4,
                name: "Leather Wallet",
                description: "Brown leather wallet with ID card inside. Reward offered for return.",
                category: "Accessories",
                location: "Sports Complex",
                date: "3 days ago",
                image: "https://placehold.co/600x400/f5f0e6/78350f?text=Leather+Wallet",
                status: "found",
                comments: []
            },
            {
                id: 5,
                name: "Silver Bracelet",
                description: "Lost my grandmother's silver bracelet with flower engravings on the campus lawn.",
                category: "Accessories",
                location: "Central Lawn",
                date: "4 days ago",
                image: "https://placehold.co/600x400/f0fdf4/166534?text=Silver+Bracelet",
                status: "found",
                comments: [
                    { user: "Sarah", text: "This was handed in to security office yesterday!" }
                ]
            },
            {
                id: 6,
                name: "Smart Watch",
                description: "Lost my Samsung Galaxy Watch near the bus stop.",
                category: "Electronics",
                location: "North Campus Bus Stop",
                date: "1 week ago",
                image: "https://placehold.co/600x400/eff6ff/1d4ed8?text=Smart+Watch",
                status: "lost",
                comments: []
            }
        ];

        // DOM Elements
        const itemsGrid = document.getElementById('itemsGrid');
        const newPostBtn = document.getElementById('newPostBtn');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const cancelPostBtn = document.getElementById('cancelPostBtn');
        const submitPostBtn = document.getElementById('submitPostBtn');
        const newPostModal = document.getElementById('newPostModal');
        const itemModal = document.getElementById('itemModal');
        const closeItemModalBtn = document.getElementById('closeItemModalBtn');
        const modalItemName = document.getElementById('modalItemName');
        const modalItemImage = document.getElementById('modalItemImage');
        const modalItemDescription = document.getElementById('modalItemDescription');
        const modalItemLocation = document.getElementById('modalItemLocation');
        const modalItemDate = document.getElementById('modalItemDate');
        const commentsContainer = document.getElementById('commentsContainer');
        const newCommentInput = document.getElementById('newCommentInput');
        const postCommentBtn = document.getElementById('postCommentBtn');
        const markFoundBtn = document.getElementById('markFoundBtn');
        const foundModal = document.getElementById('foundModal');
        const cancelFoundBtn = document.getElementById('cancelFoundBtn');
        const confirmFoundBtn = document.getElementById('confirmFoundBtn');
        const itemPhotoInput = document.getElementById('itemPhoto');
        const imagePreview = document.getElementById('imagePreview');

        // Current states
        let items = [...sampleItems];
        let currentSelectedItemId = null;
        let selectedFile = null;

        // Initialize the app
        function init() {
            renderItems();
            setupEventListeners();
        }

        // Render items to the grid
        function renderItems() {
            itemsGrid.innerHTML = '';
            
            items.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'card bg-white rounded-xl shadow-md overflow-hidden cursor-pointer transition';
                itemElement.innerHTML = `
                    <div class="relative">
                        <img src="${item.image}" alt="${item.name}" class="w-full h-48 object-cover">
                        <div class="absolute top-2 left-2">
                            <span class="item-tag ${item.status === 'lost' ? 'lost' : 'found'}">
                                ${item.status === 'lost' ? 'LOST' : 'FOUND'}
                            </span>
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-bold text-lg mb-1">${item.name}</h3>
                        <p class="text-gray-600 text-sm mb-2 line-clamp-1">${item.description}</p>
                        <div class="flex justify-between items-center text-xs text-gray-500">
                            <span><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>${item.location}</span>
                            <span>${item.date}</span>
                        </div>
                    </div>
                `;
                
                itemElement.addEventListener('click', () => {
                    openItemModal(item.id);
                });
                
                itemsGrid.appendChild(itemElement);
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            // New post modal
            newPostBtn.addEventListener('click', () => {
                newPostModal.classList.remove('hidden');
                imagePreview.style.display = 'none';
                selectedFile = null;
            });
            
            closeModalBtn.addEventListener('click', () => {
                newPostModal.classList.add('hidden');
            });
            
            cancelPostBtn.addEventListener('click', () => {
                newPostModal.classList.add('hidden');
            });
            
            // Handle image selection
            itemPhotoInput.addEventListener('change', function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        imagePreview.src = e.target.result;
                        imagePreview.style.display = 'block';
                        selectedFile = e.target.result; // Store the image data
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            submitPostBtn.addEventListener('click', () => {
                const itemName = document.getElementById('itemName').value;
                const itemDescription = document.getElementById('itemDescription').value;
                const itemCategory = document.getElementById('itemCategory').value;
                const itemLocation = document.getElementById('itemLocation').value;
                
                if (!itemName || !itemDescription || !itemLocation || !selectedFile) {
                    alert('Please fill in all required fields and upload an image');
                    return;
                }
                
                const newItem = {
                    id: items.length + 1,
                    name: itemName,
                    description: itemDescription,
                    category: itemCategory,
                    location: itemLocation,
                    date: 'Just now',
                    image: selectedFile, // Use the uploaded image data
                    status: 'lost',
                    comments: []
                };
                
                items.unshift(newItem);
                renderItems();
                document.getElementById('itemName').value = '';
                document.getElementById('itemDescription').value = '';
                document.getElementById('itemLocation').value = '';
                imagePreview.style.display = 'none';
                itemPhotoInput.value = '';
                selectedFile = null;
                newPostModal.classList.add('hidden');
            });

            // Item modal
            closeItemModalBtn.addEventListener('click', () => {
                itemModal.classList.add('hidden');
            });
            
            postCommentBtn.addEventListener('click', () => {
                const commentText = newCommentInput.value.trim();
                if (commentText && currentSelectedItemId) {
                    const itemIndex = items.findIndex(item => item.id === currentSelectedItemId);
                    if (itemIndex !== -1) {
                        items[itemIndex].comments.push({
                            user: 'You',
                            text: commentText
                        });
                        renderItemComments();
                        newCommentInput.value = '';
                    }
                }
            });
            
            markFoundBtn.addEventListener('click', () => {
                foundModal.classList.remove('hidden');
            });
            
            cancelFoundBtn.addEventListener('click', () => {
                foundModal.classList.add('hidden');
            });
            
            confirmFoundBtn.addEventListener('click', () => {
                if (currentSelectedItemId) {
                    const itemIndex = items.findIndex(item => item.id === currentSelectedItemId);
                    if (itemIndex !== -1) {
                        items[itemIndex].status = 'found';
                        renderItems();
                        itemModal.classList.add('hidden');
                        foundModal.classList.add('hidden');
                    }
                }
            });
            
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    if (!newPostModal.classList.contains('hidden')) {
                        newPostModal.classList.add('hidden');
                    }
                    if (!itemModal.classList.contains('hidden')) {
                        itemModal.classList.add('hidden');
                    }
                    if (!foundModal.classList.contains('hidden')) {
                        foundModal.classList.add('hidden');
                    }
                }
            });
        }

        // Open item modal
        function openItemModal(itemId) {
            const item = items.find(item => item.id === itemId);
            if (item) {
                currentSelectedItemId = item.id;
                modalItemName.textContent = item.name;
                modalItemImage.src = item.image;
                modalItemImage.alt = item.name;
                modalItemDescription.textContent = item.description;
                modalItemLocation.textContent = item.location;
                modalItemDate.textContent = item.date;
                
                if (item.status === 'found') {
                    document.getElementById('markFoundBtn').classList.add('hidden');
                } else {
                    document.getElementById('markFoundBtn').classList.remove('hidden');
                }
                
                renderItemComments();
                itemModal.classList.remove('hidden');
            }
        }

        // Render item comments
        function renderItemComments() {
            commentsContainer.innerHTML = '';
            const item = items.find(item => item.id === currentSelectedItemId);
            
            if (item && item.comments) {
                item.comments.forEach(comment => {
                    const commentElement = document.createElement('div');
                    commentElement.className = 'comment-item bg-gray-50 p-3 rounded-lg';
                    commentElement.innerHTML = `
                        <p class="font-medium text-sm text-gray-700">${comment.user}</p>
                        <p class="text-gray-600 text-sm">${comment.text}</p>
                    `;
                    commentsContainer.appendChild(commentElement);
                });
            }
        }

        // Initialize the app
        init();
    </script>
</body>
</html>
