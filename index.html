<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Campus Lost & Found</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Nunito', sans-serif; background: #fdf6f9; }
    .card {
      transition: transform 0.3s, box-shadow 0.3s;
      perspective: 1000px;
    }
    .card:hover {
      transform: rotateY(10deg) rotateX(5deg) scale(1.05);
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    }
    .status-found { color: #16a34a; font-weight: bold; }
    .status-lost { color: #dc2626; font-weight: bold; }
    input[type="file"] { border: 1px solid #ddd; border-radius: 0.5rem; padding: 0.4rem; width: 100%; }
  </style>
</head>
<body class="p-6">
  <h1 class="text-4xl font-bold text-center mb-6 text-pink-500">Campus Lost & Found</h1>

  <!-- Add New Item -->
  <div class="max-w-md mx-auto mb-8 p-6 bg-white rounded-2xl shadow-md">
    <h2 class="text-2xl font-semibold mb-4 text-purple-500">Add Lost/Found Item</h2>
    <form id="itemForm" class="space-y-4">
      <input type="text" id="itemName" placeholder="Item Name" class="w-full p-2 border rounded-lg" required>
      <input type="text" id="itemDesc" placeholder="Description" class="w-full p-2 border rounded-lg" required>
      <input type="file" id="itemImg" accept="image/*" required>
      <select id="itemStatus" class="w-full p-2 border rounded-lg">
        <option value="lost">Lost</option>
        <option value="found">Found</option>
      </select>
      <button type="submit" class="w-full bg-pink-400 hover:bg-pink-500 text-white p-2 rounded-lg">Add Item</button>
    </form>
  </div>

  <!-- Items Display -->
  <div id="itemsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>

  <script>
    const itemForm = document.getElementById('itemForm');
    const itemsContainer = document.getElementById('itemsContainer');
    let items = [];

    itemForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const fileInput = document.getElementById('itemImg');
      const reader = new FileReader();

      reader.onload = function() {
        const newItem = {
          name: document.getElementById('itemName').value,
          desc: document.getElementById('itemDesc').value,
          img: reader.result, // local image as base64
          status: document.getElementById('itemStatus').value,
          comments: []
        };
        items.push(newItem);
        renderItems();
        itemForm.reset();
      }

      if(fileInput.files[0]) reader.readAsDataURL(fileInput.files[0]);
    });

    function renderItems() {
      itemsContainer.innerHTML = '';
      if(items.length === 0){
        itemsContainer.innerHTML = '<p class="text-gray-500 text-center text-lg">No items yet!</p>';
        return;
      }

      items.forEach((item, index) => {
        const itemCard = document.createElement('div');
        itemCard.classList.add('card', 'bg-white', 'rounded-2xl', 'shadow-lg', 'p-4', 'flex', 'flex-col');
        itemCard.innerHTML = `
          <img src="${item.img}" alt="${item.name}" class="rounded-xl mb-4 object-cover h-48 w-full">
          <h3 class="text-xl font-bold text-purple-600">${item.name}</h3>
          <p class="mb-2">${item.desc}</p>
          <p class="${item.status === 'found' ? 'status-found' : 'status-lost'} mb-2">
            ${item.status === 'found' ? 'Owner Found' : 'Lost'}
          </p>
          <div class="mb-2">
            <input type="text" placeholder="Add comment" class="w-full p-2 border rounded-lg mb-2 comment-input-${index}">
            <button class="bg-purple-400 hover:bg-purple-500 text-white p-1 rounded-lg w-full" onclick="addComment(${index})">Comment</button>
          </div>
          <div class="comments-${index} space-y-1"></div>
        `;
        itemsContainer.appendChild(itemCard);
        renderComments(index);
      });
    }

    function addComment(index) {
      const commentInput = document.querySelector(`.comment-input-${index}`);
      if(commentInput.value.trim() !== '') {
        items[index].comments.push(commentInput.value);
        commentInput.value = '';
        renderComments(index);
      }
    }

    function renderComments(index) {
      const commentsDiv = document.querySelector(`.comments-${index}`);
      commentsDiv.innerHTML = '';
      items[index].comments.forEach(comment => {
        const commentP = document.createElement('p');
        commentP.classList.add('text-gray-700', 'bg-gray-100', 'p-1', 'rounded-md');
        commentP.innerText = comment;
        commentsDiv.appendChild(commentP);
      });
    }

    renderItems();
  </script>
</body>
</html>
